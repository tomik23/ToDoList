function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var a=function(){function e(){t(this,e)}return o(e,[{key:"renderView",value:function(t){document.querySelector(t).innerHTML='\n      <div class="header">\n        <div class="header-date">\n          <div class="header-day"></div>\n          <div class="header-month"></div>\n        </div>\n        <div class="task-left"></div>\n        <button class="show-form">+</button>\n        <div class="form-group" data-show="hidden">\n          <button class="close-form">close</button>\n          <button type="submit" id="save" class="save-form">save task</button>\n        </div>\n      </div>\n      <form class="task-form">\n        <div class="row">\n          <input id="taskName" class="full-width task-name" name="taskName" type="text" placeholder="required field" required>\n        </div>\n        <div class="full-width taskDescription" id="taskDescription" contenteditable="true"></div>\n        \x3c!-- <button type="submit" class="button-primary" id="save" value="SAVE TASK">SAVE TASK</button> --\x3e\n      </form>\n      <div class="taskList"></div>\n    '}}]),e}(),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],u=function(){function e(o,n,i,r){t(this,e),this.todolist="todolist",this.taskList=".taskList",this.item="item",this.checked="checked",this.taskForm=".task-form",this.dataId="data-id",this.more="more",this.taskName="#taskName",this.taskDescription="#taskDescription",this.buttonText=".button-text",this.date=new Date,this.storage=o,this.counter=n,this.buttons=i,this.light=r,(new a).renderView(".app-todo")}return o(e,[{key:"initTodoList",value:function(){var t=this;document.getElementById("save").addEventListener("click",(function(e){e.preventDefault();var o=t.getLastId(),n=document.querySelector(t.taskName),i=document.querySelector(t.taskDescription),r="text"===document.querySelector(t.buttonText).value?i.textContent:i.innerHTML;if(n.value.trim()){var a={id:o,name:n.value.trim(),info:r,check:!1};i.innerHTML="",t.createLocalStorage(a)}else t.requireInput(n)})),this.output(),this.light.switchLight(),this.buttons.buttonCreate(),this.showHideForm(),this.dateTime()}},{key:"dateTime",value:function(){var t=document.querySelector(".header-month"),e=document.querySelector(".header-day"),o=new Date,n=o.getDate().toString();e.innerText="".concat(s[o.getDay()]," ").concat(n.padStart(2,"0")),t.innerText=c[o.getMonth()]}},{key:"showHideForm",value:function(){var t=document.querySelector(".show-form"),e=document.querySelector(".close-form"),o=document.querySelector(".task-form"),n=document.querySelector(".form-group"),i=document.querySelector(".task-name");t.addEventListener("click",(function(){t.setAttribute("data-show","hidden"),n.removeAttribute("data-show"),o.classList.add("anim-height")})),e.addEventListener("click",(function(){t.removeAttribute("data-show"),n.setAttribute("data-show","hidden"),i.removeAttribute("style"),o.classList.remove("anim-height")}))}},{key:"requireInput",value:function(t){t.setAttribute("style","border: 1px solid red; box-shadow: 0 0 15px 2px rgba(255,0,0,0.2);"),t.addEventListener("input",(function(){t.removeAttribute("style")}))}},{key:"saveStorageToFile",value:function(){var t=this;document.querySelector(".button-storage").addEventListener("click",(function(){return t.saveStorageToFile()}));var e=Math.floor(9e9*Math.random())+1e9,o=this.storage.getItemFromStorage(this.todolist),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-u,".concat(encodeURIComponent(JSON.stringify(o)))),n.setAttribute("download","".concat(this.date.toLocaleDateString(),"-").concat(e,".txt")),n.click()}},{key:"getLastId",value:function(){var t=this.storage.getItemFromStorage(this.todolist),e=[];return t&&t.forEach((function(t){e.push(t.id)})),0===e.length?1:Math.max.apply(Math,e)+1}},{key:"createLocalStorage",value:function(t){var e=this.storage.getItemFromStorage(this.todolist)?this.storage.getItemFromStorage(this.todolist):[];e.push(t),this.storage.removeItemFromStorage(this.todolist),this.storage.setToStorage(this.todolist,e),this.output(),document.querySelector(this.taskForm).reset()}},{key:"output",value:function(){var t=this;document.querySelector(this.taskList).innerHTML="";var e=this.storage.getItemFromStorage(this.todolist);e&&e.map((function(e){var o=e.id,n=e.name,i=e.info,r=e.check,a=document.createElement("div"),s=i,c=null===o?1:o,u=!0===r?t.checked:"",l=document.querySelector(t.taskList),d=i?'<div class="todo-description" title="show '.concat(t.more,'">\n              ').concat(s,"\n            </div>"):"";a.setAttribute(t.dataId,c),a.setAttribute("class","".concat(t.item," ").concat(u)),a.setAttribute("style","position: relative");var h='\n          <div class="todo-title">'.concat(n,"</div>\n          ").concat(d,'\n          <span class="todo-remove" data-inverted data-tooltip="Remove task" title="remove task" data-show="hidden">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 448">\n              <path d="M128 184v144c0 4.5-3.5 8-8 8h-16c-4.5 0-8-3.5-8-8V184c0-4.5 3.5-8 8-8h16c4.5 0 8 3.5 8 8zm64 0v144c0 4.5-3.5 8-8 8h-16c-4.5 0-8-3.5-8-8V184c0-4.5 3.5-8 8-8h16c4.5 0 8 3.5 8 8zm64 0v144c0 4.5-3.5 8-8 8h-16c-4.5 0-8-3.5-8-8V184c0-4.5 3.5-8 8-8h16c4.5 0 8 3.5 8 8zm32 181V128H64v237c0 12 6.75 19 8 19h208c1.25 0 8-7 8-19zM120 96h112l-12-29.25c-.75-1-3-2.5-4.25-2.75H136.5c-1.5.25-3.5 1.75-4.25 2.75zm232 8v16c0 4.5-3.5 8-8 8h-24v237c0 27.5-18 51-40 51H72c-22 0-40-22.5-40-50V128H8c-4.5 0-8-3.5-8-8v-16c0-4.5 3.5-8 8-8h77.25l17.5-41.75C107.75 42 122.75 32 136 32h80c13.25 0 28.25 10 33.25 22.25L266.75 96H344c4.5 0 8 3.5 8 8z"/>\n            </svg>\n          </span>\n        ');return a.innerHTML=h,l.appendChild(a)})),this.handleEvent(),this.counter.renderCounter()}},{key:"handleEvent",value:function(){var t=this;document.querySelectorAll(".".concat(this.item)).forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation();var o=e.currentTarget,n=e.target,i=n.parentNode,a=n.className,s=Number(i.getAttribute(t.dataId)),c=t.storage.getItemFromStorage(t.todolist);switch(a){case"todo-title":o.classList.toggle(t.checked);var u=c.filter((function(t){return t.id===s})).map((function(t){var e=!0!==t.check;return r(r({},t),{},{check:e})})),l=c.map((function(t){return u.find((function(e){return e.id===t.id}))||t}));t.storage.removeItemFromStorage(t.todolist),t.storage.setToStorage(t.todolist,l),t.output();break;case"todo-description":o.classList.toggle(t.more);break;case"todo-remove":var d=c.filter((function(t){return t.id!==s}));t.storage.removeItemFromStorage(t.todolist),t.storage.setToStorage(t.todolist,d),t.output()}}))}))}}]),e}(),l=function(){function e(o){t(this,e),this.sessionType=o.sesionType}return o(e,[{key:"setToStorage",value:function(t,e){this.sessionType.setItem(t,JSON.stringify(e))}},{key:"getItemFromStorage",value:function(t){return JSON.parse(this.sessionType.getItem(t))}},{key:"removeItemFromStorage",value:function(t){this.sessionType.removeItem(t)}}]),e}(),d=function(){function e(o){t(this,e),this.options=o}return o(e,[{key:"renderCounter",value:function(){var t,e=this.options,o=e.checked,n=e.item,i=e.leftTask,r=e.taskLeftText,a=document.querySelectorAll(o).length,s=document.querySelectorAll(n).length,c=document.querySelector(i);t=0===s&&0===a?"":0===a?"".concat(s," ").concat(r):"".concat(s-a," ").concat(r),c.innerText=t}}]),e}(),h=function(){function e(o){var n=o.insertId,i=o.buttonToolbar,r=o.typeText,a=o.typeHtml,s=o.rowClass,c=o.taskDescription,u=o.buttons;t(this,e),this.insertId=n,this.buttonToolbar=i,this.typeText=r,this.typeHtml=a,this.rowClass=s,this.taskDescription=c,this.buttons=u,this.countButton=this.buttons.length}return o(e,[{key:"buttonCreate",value:function(){var t=this,e=document.createElement("div");e.setAttribute("class","".concat(this.rowClass)),this.buttons.forEach((function(o,n){var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("class","".concat(t.buttonToolbar," button-").concat(o.type)),i.setAttribute("data-tooltip",o.tooltip),i.setAttribute("data-position","top center"),i.setAttribute("data-inverted",""),i.setAttribute("data-command",o.type),i.textContent=o.key,i.value=o.key,i.dataset.show=n>0&&n<t.countButton-1?"hidden":"show",e.append(i)}));var o=document.querySelector(this.taskDescription);o.parentNode.insertBefore(e,o.nextSibling),this.buttonEvent()}},{key:"buttonEvent",value:function(){var t=this;document.querySelectorAll(".".concat(this.buttonToolbar)).forEach((function(e){e.addEventListener("click",(function(e){var o,n,i=e.target,r=i.getAttribute("data-command"),a=document.querySelector(".button-text");document.execCommand(r,!1,null),i.value!==t.typeText&&i.value!==t.typeHtml||(i.value===t.typeText?(o=t.typeHtml,n="Inserted as html"):(o=t.typeText,n="Inserted as text"),a.value=o,a.textContent=o,a.dataset.tooltip=n)}))})),this.showHide()}},{key:"showHide",value:function(){var t=document.querySelectorAll(".button-toolbar"),e=document.querySelector(".button-text");e.addEventListener("click",(function(){var o=e.value;t.forEach((function(e,n){var i=e,r=n>0&&n<t.length-1;"html"===o?i.dataset.show="show":r&&(i.dataset.show="hidden")}))}))}}]),e}(),m=function(){function e(o){var n=o.lightClass,i=o.lightText,r=o.lightColorA,a=o.lightColorB,s=o.lightOn,c=o.lightOff;t(this,e),this.lightClass=n,this.lightText=i,this.lightColorA=r,this.lightColorB=a,this.lightOn=s,this.lightOff=c}return o(e,[{key:"switchLight",value:function(){var t=this;this.createLightButton(),document.querySelector("#".concat(this.lightText)).addEventListener("click",(function(){var e=document.body;e.style.backgroundColor===t.lightColorA?(e.style.backgroundColor=t.lightColorB,e.classList.add(t.lightOn),e.classList.remove(t.lightOff)):(e.style.backgroundColor=t.lightColorA,e.classList.add(t.lightOff),e.classList.remove(t.lightOn))}))}},{key:"createLightButton",value:function(){var t=document.querySelector(this.lightClass),e=document.createElement("div");e.id=this.lightText,e.innerText=this.lightText,t.appendChild(e)}}]),e}(),v={checked:".checked",item:".item",leftTask:".task-left",taskLeftText:"task left"},f={insertId:"typeInsert",buttonToolbar:"button-toolbar",typeText:"text",typeHtml:"html",rowClass:"toolbar",taskDescription:".taskDescription",buttons:[{type:"text",key:"text",tooltip:"Inserted as text"},{type:"bold",key:"b",tooltip:"Bold"},{type:"italic",key:"i",tooltip:"Italic"},{type:"insertUnorderedList",key:"u",tooltip:"Bullet list"},{type:"insertOrderedList",key:"o",tooltip:"Numbered list"},{type:"removeFormat",key:"clear",tooltip:"Remove format"}]},g={lightClass:".app-todo",lightText:"light",lightColorA:"rgb(41, 41, 41)",lightColorB:"rgb(98, 93, 227)",lightOn:"is-todo-on",lightOff:"is-todo-off"},y={sesionType:localStorage};document.addEventListener("DOMContentLoaded",(function(){var t=new l(y),e=new d(v),o=new h(f),n=new m(g);new u(t,e,o,n).initTodoList()}));
